<!DOCTYPE html>
<html>
	<head>
		<title>go-quantstudio CvO</title>
		<script src="/plotly-2.16.1.min.js"></script>
		<script src="/chartCvO/chartCvO.js"></script>
		<script src="/script.js"></script>
		<style>
				:root {
					--chartWidth: 1200px;
				}
				#symbol {
					width: 4em;
					/* margin-left: 1em; */
					margin-right: 1em;
				}
				#maLength {
					width: 3em;
					/* margin-left: 1em; */
					margin-right: 1em;
				}
				#maSplit {
					width: 3em;
					/* margin-left: 1em; */
					margin-right: 1em;
				}
				#process {
					margin-left: 1em;
					margin-right: 1em;
				}
				#downloadData{
					margin-left: 1em;
					margin-right: 1em;
				}
				#symbols {
					overflow-y: scroll;
					resize: none;
					width: 20em;
					height: 4em;
				}
				#chartCvOChart {
					width: var(--chartWidth);
					height: 800px;
				}
				#tradeHistory {
  					width: var(--chartWidth);
  					height: 20em;
				}
		</style>
	</head>
	<body>
		<h3>go-quantstudio CvO</h3>
		<div id="chartCvO">
			Symbol: <input id="symbol" value="qqq" >
			MaLength: <input id="maLength" value="100">
			MaSplit: <input id="maSplit" value="0.04">
			<button id="process">Process</button>
			<button id="downloadData">Download Data</button>
			<label for="symbols">Loaded symbols</label>
			<textarea readonly id="symbols" name="symbols"></textarea>
			<hr />
			<div id="chartCvOChart"></div>
			<div id="history">
				<p><label for="tradeHistory">Trade history:</label></p>
				<textarea readonly id="tradeHistory" name="tradeHistory"></textarea>
				<p>* Trade history prices are adjusted open/close, while the chart shows normalized prices.
					Trades happen the day after the signal change. The Trade signal is a straight line from
					the buy level to sell level, or vice versa. When prices are near the top/bottom of the chart
					it may appear the trade is happening on the wrong day since the Trade plot is NOT vertical,
					but slightly diagonal as it changes value.
				</p>
			</div>
		</div>
	</body>
	<script>
		var inputSymbol = document.getElementById("symbol");
		inputSymbol.addEventListener("keypress", function(event) {
		  if (event.key === "Enter") {
			event.preventDefault();
			document.getElementById("process").click();
		  }
		});

		var inputMALength = document.getElementById("maLength");
		inputMALength.addEventListener("keypress", function(event) {
		  if (event.key === "Enter") {
			event.preventDefault();
			document.getElementById("process").click();
		  }
		});

		var inputMASplit = document.getElementById("maSplit");
		inputMASplit.addEventListener("keypress", function(event) {
		  if (event.key === "Enter") {
			event.preventDefault();
			document.getElementById("process").click();
		  }
		});

		loadSymbols();
	</script>
</html>